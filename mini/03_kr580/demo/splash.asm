; ------------------------------------------------------------------------------
;
; ------------------------------------------------------------------------------

splash_scr:

        ; Скопировать авард модуляр
        ld      bc, 6*16
        ld      de, .modularo
        ld      hl, $f010
        call    copy

        ld      bc, 76*16
        ld      de, .epa
        ld      hl, $f800
        call    copy

        ; Рисование текста на экране
        ld      hl, .str1
        call    print
        ld      hl, $0017
        ld      (cursor), hl
        ld      hl, .str2
        call    print
        ld      a, $0F
        ld      (cursor.cl), a
        ld      hl, .str3
        call    print
        ld      a, $07
        ld      (cursor.cl), a
        ld      hl, .str4
        call    print

        ; Раскраска EPA
        ld      a, 9
        ld      hl, $e003+0
        ld      (hl), a
        inc     hl
        inc     hl
        ld      (hl), a
        ld      hl, $e001+160
        ld      (hl), a
        inc     hl
        inc     hl
        ld      (hl), a
        inc     hl
        inc     hl
        ld      (hl), a

        ; Показать Energy Star
        ld      de, .epatilemap
        ld      hl, $e000+(80-17)*2
        ld      c, 6
.L2:    ld      b, 17
.L1:    ld      a, (de)
        ld      (hl), a
        inc     hl
        ld      a, c
        cp      1
        ld      a, 14
        jr      nz, .L3
        ld      a, 10       ; Если это последняя строка, то зеленый цвет
.L3:    ld      (hl), a
        inc     hl
        inc     de
        djnz    .L1
        ld      a, l
        add     126
        ld      l, a
        ld      a, h
        adc     0
        ld      h, a
        dec     c
        jr      nz, .L2
        ret

.str1:  defb    1,2,3,"Award Modular BIOS v4.51PG, An Energy Star Ally",10
        defb    4,5,6,"Copyright (C) 1984-97, Award Software, Inc.",10,10
        defb    "(55XWUQ0E) Intel i430VX PCIset(TM)",10,10
        defb    "PENTIUM-S CPU at 25Mhz",10
        defb    "Memory Test : ",0
.str2:  defb    "Press",0
.str3:  defb    " DEL ",0
.str4:  defb    "to enter SETUP",10
        defb    "12/10/97-i430VX,UMC8669-2A59GH2BC-00",0

; ------------------------------------------------------------------------------
.modularo:

    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$07,$1f,$1f,$3f,$3f,$7f,$7f,$7f,$3f,$3f,$1f,$1f,$07,$00
    defb $00,$00,$80,$e0,$e0,$f0,$f0,$f8,$f8,$f8,$f0,$f0,$e0,$e0,$80,$00
    defb $00,$0e,$1d,$3d,$7b,$fb,$07,$07,$0f,$0f,$1e,$18,$20,$00,$00,$00
    defb $00,$ff,$ff,$ff,$ff,$ff,$ff,$ef,$c7,$03,$03,$03,$01,$00,$00,$00
    defb $00,$e0,$e0,$e0,$c0,$c0,$c0,$80,$80,$80,$00,$00,$00,$00,$00,$00

; ------------------------------------------------------------------------------
.epa:

    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$0f,$3e,$f8
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$0f,$7e,$f0,$80,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$1f,$ff,$e0,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$7f,$ff,$80,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$ff,$ff,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$e0,$ff,$1f,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$80,$f8,$7f,$07,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$e0,$f8,$1f,$07,$01
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$c0,$f0
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$03,$07
    defb $00,$00,$00,$00,$00,$01,$03,$07,$0e,$1c,$38,$70,$e0,$c0,$80,$00
    defb $01,$07,$0e,$3c,$70,$e0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $e0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $78,$1e,$07,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$c0,$e0,$78,$1c,$0e,$07,$03,$01,$00,$00,$38,$7c,$7c
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$c0,$e0,$70,$38,$1c,$0e
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$03,$03,$06,$06,$0e
    defb $06,$0c,$1c,$18,$30,$70,$60,$c0,$c0,$80,$80,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$3f,$7f,$3f,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$ff,$ff,$ff,$00
    defb $00,$00,$00,$01,$01,$01,$03,$03,$03,$07,$06,$0e,$fe,$fc,$fc,$00
    defb $6c,$6e,$c6,$c7,$87,$83,$83,$03,$01,$01,$00,$00,$00,$00,$00,$00
    defb $06,$03,$03,$01,$00,$00,$80,$80,$80,$c0,$c0,$e0,$ff,$7f,$7f,$00
    defb $00,$00,$80,$80,$c0,$c0,$60,$30,$30,$00,$00,$00,$ff,$ff,$ff,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$f8,$fc,$f8,$f0
    defb $0c,$0c,$18,$18,$18,$18,$30,$30,$30,$30,$30,$60,$60,$60,$60,$60
    defb $00,$00,$00,$00,$00,$00,$01,$03,$06,$0c,$18,$30,$20,$60,$43,$c6
    defb $00,$00,$00,$1e,$73,$c3,$82,$06,$04,$0c,$18,$30,$60,$c1,$83,$07
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$30,$33,$67,$ef,$cb,$f3,$e3
    defb $00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$03,$02,$06,$07,$07,$1e
    defb $00,$00,$00,$00,$00,$00,$00,$30,$f8,$90,$31,$63,$c6,$8c,$18,$71
    defb $00,$00,$00,$00,$00,$33,$27,$6f,$79,$f0,$e0,$60,$c0,$c0,$80,$80
    defb $00,$00,$00,$01,$03,$06,$0c,$18,$91,$f3,$7e,$41,$63,$3f,$06,$0d
    defb $00,$00,$40,$f0,$38,$30,$61,$c7,$8e,$78,$e0,$c0,$c0,$80,$80,$80
    defb $00,$00,$00,$00,$10,$70,$e0,$e1,$c3,$c6,$8c,$99,$f3,$4f,$19,$33
    defb $00,$00,$30,$30,$70,$e0,$e1,$c7,$dc,$f9,$e1,$c1,$83,$03,$03,$03
    defb $00,$00,$00,$07,$1c,$70,$c0,$00,$00,$c0,$c0,$80,$80,$80,$80,$00
    defb $0e,$3c,$f0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$00,$01,$03,$03,$01,$01,$01,$01,$00
    defb $01,$03,$07,$0f,$1e,$3c,$78,$f0,$e0,$c0,$80,$80,$c0,$c0,$c0,$c0
    defb $e0,$c0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $60,$00,$08,$0f,$07,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$01,$0f,$ff,$f1,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $9c,$f0,$c0,$00,$01,$87,$fc,$30,$00,$00,$00,$00,$00,$00,$00,$00
    defb $0c,$19,$31,$e1,$81,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $c3,$c1,$80,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $ff,$e1,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $c0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$00,$00,$00,$00,$00
    defb $11,$33,$22,$66,$c4,$cc,$88,$98,$b0,$e0,$c0,$00,$00,$00,$00,$00
    defb $00,$00,$00,$01,$03,$02,$06,$04,$0c,$08,$08,$0c,$07,$00,$00,$00
    defb $62,$c6,$86,$84,$0c,$08,$18,$10,$30,$20,$60,$c0,$80,$00,$00,$00
    defb $07,$07,$07,$0e,$0e,$0e,$0c,$0e,$1f,$1f,$3e,$38,$00,$00,$00,$00
    defb $00,$00,$01,$07,$0f,$3e,$78,$f8,$c0,$80,$00,$00,$00,$00,$00,$00
    defb $3c,$ff,$ff,$c3,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    defb $00,$00,$80,$e0,$f0,$7c,$1e,$0f,$03,$01,$00,$00,$00,$00,$00,$00
    defb $e0,$e0,$e0,$70,$70,$70,$30,$b8,$f8,$f8,$7c,$1c,$00,$00,$00,$00
    defb $1f,$00,$00,$00,$0f,$08,$08,$0f,$08,$08,$0f,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$bc,$22,$22,$3c,$20,$20,$a0,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$20,$20,$70,$50,$f8,$88,$88,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$3c,$22,$22,$3c,$20,$20,$20,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$72,$8a,$8a,$8a,$8a,$8a,$73,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$08,$08,$08,$08,$08,$08,$ef,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$22,$22,$22,$22,$22,$22,$9c,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$fb,$21,$21,$21,$21,$21,$23,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$9c,$22,$22,$22,$22,$22,$9c,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$88,$c8,$c8,$a8,$98,$98,$88,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$f3,$8a,$8a,$f3,$a2,$92,$8b,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$e8,$08,$08,$c5,$05,$02,$e2,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$be,$a0,$a0,$3c,$20,$20,$3e,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$8b,$c8,$c8,$a8,$98,$98,$88,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$ef,$88,$88,$8f,$88,$88,$8f,$00,$00,$00,$00,$00
    defb $ff,$00,$00,$00,$bc,$22,$22,$3c,$28,$24,$a2,$00,$00,$00,$00,$00

.epatilemap:

    defb $80,$80,$80,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$80,$80,$80,$80
    defb $80,$8a,$8b,$8c,$8d,$80,$80,$80,$80,$80,$80,$80,$8e,$8f,$90,$80,$80
    defb $91,$92,$80,$80,$80,$80,$80,$80,$80,$80,$93,$94,$95,$96,$97,$98,$99
    defb $9a,$80,$9b,$9c,$9d,$9e,$9f,$a0,$a1,$a2,$a3,$a4,$a5,$a6,$a7,$a8,$a9
    defb $aa,$ab,$ac,$ad,$ae,$af,$b0,$b1,$b2,$b3,$b4,$b5,$b6,$b7,$b8,$b9,$80
    defb $ba,$bb,$bc,$bd,$be,$bf,$c0,$c1,$c2,$c3,$bd,$c4,$c5,$c6,$c7,$c8,$c9

; ------------------------------------------------------------------------------
; Проверка памяти
; ------------------------------------------------------------------------------

memtest:

        ld      hl, 0
.L1:    inc     hl
        push    hl
        push    hl
        ld      hl, $0E06
        ld      (cursor), hl
        pop     hl
        call    ui2a
        call    print
        ld      a, 'K'
        call    term
        pop     hl
        ld      a, h
        sub     $20             ; 8Mb
        or      a, l
        jr      nz, .L1
        ret
